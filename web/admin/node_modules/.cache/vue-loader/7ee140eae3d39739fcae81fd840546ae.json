{"remainingRequest":"/Users/salmon/go/src/我的博客/blog/web/admin/node_modules/_vue-loader@15.9.7@vue-loader/lib/index.js??vue-loader-options!/Users/salmon/go/src/我的博客/blog/web/admin/src/components/category/CateList.vue?vue&type=style&index=0&lang=css&","dependencies":[{"path":"/Users/salmon/go/src/我的博客/blog/web/admin/src/components/category/CateList.vue","mtime":1626424107629},{"path":"/Users/salmon/go/src/我的博客/blog/web/admin/node_modules/_css-loader@3.6.0@css-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/salmon/go/src/我的博客/blog/web/admin/node_modules/_vue-loader@15.9.7@vue-loader/lib/loaders/stylePostLoader.js","mtime":499162500000},{"path":"/Users/salmon/go/src/我的博客/blog/web/admin/node_modules/_postcss-loader@3.0.0@postcss-loader/src/index.js","mtime":499162500000},{"path":"/Users/salmon/go/src/我的博客/blog/web/admin/node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/salmon/go/src/我的博客/blog/web/admin/node_modules/_vue-loader@15.9.7@vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgouYWN0aW9uU2xvdHsKCWRpc3BsYXk6IGZsZXg7CglqdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlcjsKfQoK"},{"version":3,"sources":["CateList.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAwMA;AACA;AACA;AACA","file":"CateList.vue","sourceRoot":"src/components/category","sourcesContent":["<template>\n\t<div>\n\t\t<a-card>\n\t\t\t<a-row :gutter=\"20\">\n\t\t\t\t<a-col :span=\"4\">\n\t\t\t\t\t<a-button type=\"primary\" @click=\"AddcateVisible = true\">新增分类</a-button>\n\t\t\t\t</a-col>\n\t\t\t</a-row>\n\t\t\t<a-table\n\t\t\t\t:columns='columns' \n\t\t\t\trowKey='id'\n\t\t\t\t:pagination=\"pagination\"\n\t\t\t\t:dataSource=\"catelist\"\n\t\t\t\tbordered\n\t\t\t\t@change=\"handleTableChange\"\n\t\t\t>\n\t\t\t<template slot=\"action\" slot-scope=\"data\">\n\t\t\t\t<div class=\"actionSlot\">\n\t\t\t\t<a-button type=\"primary\" icon=\"edit\" style=\"margin-right:15px\" @click=\"editcate(data.id)\">编辑</a-button>\n\t\t\t\t<a-popconfirm title=\"确认删除？删除后无法恢复\" ok-text=\"确认\" cancel-text=\"取消\" @confirm=\"delcate(data.id)\">\n\t\t\t\t  <a-button icon=\"delete\" type=\"danger\">删除</a-button>\n\t\t\t\t</a-popconfirm>\n\t\t\t</div>\n\t\t\t</template>\n\t\t\t</a-table>\n\t\t</a-card>\n\t\t\n\t\t<!-- 新增分类对话框 -->\n\t\t<a-modal\n      title=\"新增分类\"\n      :visible=\"AddcateVisible\"\n      @ok=\"AddcateOk\"\n      @cancel=\"addcateCanal\"\n\t\t\tclosable\n    >\n      <a-form-model :model=\"cateinfo\" ref=\"addcateRef\">\n\t\t\t\t<a-form-model-item label=\"分类名\" prop=\"name\">\n\t\t\t\t\t<a-input v-model=\"cateinfo.name\"></a-input>\n\t\t\t\t</a-form-model-item>\n\t\t\t</a-form-model>\n    </a-modal>\n\n\t\t<!-- 编辑分类 -->\n\t\t<a-modal\n      title=\"编辑分类\"\n      :visible=\"editcateVisible\"\n      @ok=\"editcateOk\"\n\t\t\twidth=\"60%\"\n      @cancel=\"editcateCanal\"\n\t\t\tclosable\n    >\n      <a-form-model :model=\"cateinfo\" ref=\"addcateRef\">\n\t\t\t\t<a-form-model-item label=\"分类名\" prop=\"name\">\n\t\t\t\t\t<a-input v-model=\"cateinfo.name\"></a-input>\n\t\t\t\t</a-form-model-item>\n\t\t\t\t\n\t\t\t</a-form-model>\n    </a-modal>\n\t</div>\n</template>\n\n<script>\nconst columns = [\n\t{\n    title: 'ID',\n    dataIndex: 'id',\n    key: 'id',\n    width: '10%',\n\t\talign:'center'\n  },\n\t{\n    title: '分类名',\n    dataIndex: 'name',\n    key: 'name',\n    width: '20%',\n\t\talign:'center'\n  },\n\t{\n    title: '操作',\n    key: 'action',\n    width: '30%',\n\t\tscopedSlots:{customRender:'action'},\n\t\talign:'center'\n  },\n]\nexport default {\n\tdata(){\n\t\treturn{\n\t\t\tcolumns,\n\t\t\tchangePasswordVisible: false,\n\t\t\t// 分页\n\t\t\tpagination: {\n        pageSizeOptions: ['5', '10', '20'],\n        pageSize: 5,\n        total: 0,\n        showSizeChanger: true,\n        showTotal: (total) => `共${total}条`,\n      },\n\t\t\tqueryParam: {\n\t\t\t\tname:'',\n        pagesize: 5,\n        pagenum: 1,\n      },\n\t\t\tcatelist:[],\n\t\t\tAddcateVisible:false,\n\t\t\teditcateVisible:false,\n\t\t\tcateinfo:{\n\t\t\t\tid:0,\n\t\t\t\tname:'',\n\t\t\t},\n\t\t}\n\t},\n\tcreated(){\n\t\tthis.getcateList()\n\t},\n\tmethods:{\n\t\t// 查询分类\n\t\tasync getcateList(){\n\t\t\tconst { data:res } = await this.$http.get('api/v1/category/', {\n\t\t\t\tparams:{\n\t\t\t\t\tsize: this.queryParam.pagesize,\n\t\t\t\t\tpage: this.queryParam.pagenum,\n\t\t\t\t\t},\n\t\t\t\t})\n\t\t\tif(res.code != 200)return this.$message.error(res.msg)\n\t\t\tthis.catelist = res.data\n\t\t\tthis.pagination.total = res.total\n\t\t},\n\t\t// 分页\n\t\thandleTableChange(pagination, filters, sorter) {\n      var pager = { ...this.pagination }\n      pager.current = pagination.current\n      pager.pageSize = pagination.pageSize\n      this.queryParam.pagesize = pagination.pageSize\n      this.queryParam.pagenum = pagination.current\n\n      if (pagination.pageSize !== this.pagination.pageSize) {\n        this.queryParam.pagenum = 1\n        pager.current = 1\n      }\n      this.pagination = pager\n      this.getcateList()\n    },\n\t\t// 删除分类\n\t\tasync delcate(id){\n\t\t  const { data: res } = await this.$http.delete(`api/admin/category/${id}/`)\n\t\t\tif(res.code != 200)return this.$message.error(res.msg)\n\t\t\tthis.$message.success('删除成功')\n\t\t\tthis.queryParam.pagenum = 1\n\t\t\tthis.getcateList()\n\t\t},\n\n\t\tasync AddcateOk(){\n\t\t\t\tconst { data: res } = await this.$http.post(\"api/admin/category/\",{\n\t\t\t\t\t\"name\":this.cateinfo.name,\n\t\t\t\t\t})\n\t\t\t\tif (res.code != 200) return this.$message.error(res.msg)\n\t\t\t\t// 清空搜索框\n\t\t\t\tthis.$refs.addcateRef.resetFields()\n\t\t\t\t// 关闭弹窗\n        this.AddcateVisible = false\n        this.$message.success('添加成功')\n        this.getcateList()\n\t\t},\n\t\t// 取消的方法\n\t\taddcateCanal(){\n\t\t\tthis.$refs.addcateRef.resetFields()\n\t\t\tthis.AddcateVisible = false\n\t\t},\n\t\t// 编辑框获取分类信息\n\t\tasync editcate(id){\n\t\t\tthis.editcateVisible = true\n\t\t\tconst {data: res } = await this.$http.get(`/api/v1/category/${id}/`)\n\t\t\tthis.cateinfo = res.data\n\t\t\tthis.cateinfo.id = id\n\t\t},\n\t\t// 编辑分类\n\t\tasync editcateOk(){\n\t\t\t\tconst { data: res } = await this.$http.put(`/api/admin/category/${this.cateinfo.id}/`,{\n\t\t\t\t\t\"name\":this.cateinfo.name,\n\t\t\t\t\t})\n\t\t\t\tif (res.code != 200) return this.$message.error(res.msg)\n\t\t\t\t// 清空搜索框\n\t\t\t\tthis.$refs.addcateRef.resetFields()\n\t\t\t\t// 关闭弹窗\n        this.editcateVisible = false\n        this.$message.success('编辑成功')\n        this.getcateList()\n\t\t},\n\t\t// 取消编辑销毁数据\n\t\teditcateCanal(){\n\t\t\tthis.$refs.addcateRef.resetFields()\n\t\t\tthis.editcateVisible = false\n\t\t},\n\t}\n\n}\n</script>\n\n<style>\n.actionSlot{\n\tdisplay: flex;\n\tjustify-content: center;\n}\n\n</style>"]}]}