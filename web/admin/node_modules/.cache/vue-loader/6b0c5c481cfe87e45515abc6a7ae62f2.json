{"remainingRequest":"/Users/salmon/go/src/我的博客/blog/web/admin/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/salmon/go/src/我的博客/blog/web/admin/src/components/article/Addart.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/salmon/go/src/我的博客/blog/web/admin/src/components/article/Addart.vue","mtime":1627027464464},{"path":"/Users/salmon/go/src/我的博客/blog/web/admin/node_modules/cache-loader/dist/cjs.js","mtime":1627027136676},{"path":"/Users/salmon/go/src/我的博客/blog/web/admin/node_modules/babel-loader/lib/index.js","mtime":1627027136623},{"path":"/Users/salmon/go/src/我的博客/blog/web/admin/node_modules/cache-loader/dist/cjs.js","mtime":1627027136676},{"path":"/Users/salmon/go/src/我的博客/blog/web/admin/node_modules/vue-loader/lib/index.js","mtime":1627027137970}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCB7VXJsfSBmcm9tICIuLi8uLi9wbHVnaW5zL2h0dHAiCmV4cG9ydCBkZWZhdWx0IHsKCXByb3BzOlsnaWQnXSwKCWRhdGEoKXsKCQlyZXR1cm57CgkJCS8vIGJhc2V1cmw6JycsCgkJCWFydEluZm86ewoJCQkJaWQ6MCwKCQkJCXRpdGxlOicnLAoJCQkJY2lkOnVuZGVmaW5lZCwKCQkJCWRlc2M6JycsCgkJCQljb250ZW50OicnLAoJCQkJaW1nOicnCgkJCX0sCgkJCUNhdGVsaXN0OltdLAoJCQl1cGxvYWRVcmw6VXJsKycvYXBpL2FkbWluL2ZpbGUvJywKCQkJaGVhZGVyczp7fSwKCQkJYXJ0SW5mb1J1bGVzOiB7CiAgICAgICAgdGl0bGU6IFt7IHJlcXVpcmVkOiB0cnVlLCBtZXNzYWdlOiAn6K+36L6T5YWl5paH56ug5qCH6aKYJywgdHJpZ2dlcjogJ2NoYW5nZScgfV0sCiAgICAgICAgY2lkOiBbeyByZXF1aXJlZDogdHJ1ZSwgbWVzc2FnZTogJ+ivt+mAieaLqeaWh+eroOWIhuexuycsIHRyaWdnZXI6ICdjaGFuZ2UnIH1dLAogICAgICAgIGRlc2M6IFsKICAgICAgICAgIHsgcmVxdWlyZWQ6IHRydWUsIG1lc3NhZ2U6ICfor7fovpPlhaXmlofnq6Dmj4/ov7AnLCB0cmlnZ2VyOiAnY2hhbmdlJyB9LAogICAgICAgICAgeyBtYXg6IDEyMCwgbWVzc2FnZTogJ+aPj+i/sOacgOWkmuWPr+WGmTEyMOS4quWtl+espicsIHRyaWdnZXI6ICdjaGFuZ2UnIH0sCiAgICAgICAgXSwKICAgICAgICBjb250ZW50OiBbeyByZXF1aXJlZDogdHJ1ZSwgbWVzc2FnZTogJ+ivt+i+k+WFpeaWh+eroOWGheWuuScsIHRyaWdnZXI6ICdjaGFuZ2UnIH1dLAogICAgICB9LAoJCQkvLyBtYXJrZG93buWvueixoQoJCQl0b29sYmFyczogewogICAgICAgIGJvbGQ6IHRydWUsIC8vIOeyl+S9kwogICAgICAgIGl0YWxpYzogdHJ1ZSwgLy8g5pac5L2TCiAgICAgICAgaGVhZGVyOiB0cnVlLCAvLyDmoIfpopgKICAgICAgICB1bmRlcmxpbmU6IHRydWUsIC8vIOS4i+WIkue6vwogICAgICAgIHN0cmlrZXRocm91Z2g6IHRydWUsIC8vIOS4reWIkue6vwogICAgICAgIG1hcms6IHRydWUsIC8vIOagh+iusAogICAgICAgIHN1cGVyc2NyaXB0OiB0cnVlLCAvLyDkuIrop5LmoIcKICAgICAgICBzdWJzY3JpcHQ6IHRydWUsIC8vIOS4i+inkuaghwogICAgICAgIHF1b3RlOiB0cnVlLCAvLyDlvJXnlKgKICAgICAgICBvbDogdHJ1ZSwgLy8g5pyJ5bqP5YiX6KGoCiAgICAgICAgdWw6IHRydWUsIC8vIOaXoOW6j+WIl+ihqAogICAgICAgIGxpbms6IHRydWUsIC8vIOmTvuaOpQogICAgICAgIGltYWdlbGluazogdHJ1ZSwgLy8g5Zu+54mH6ZO+5o6lCiAgICAgICAgY29kZTogdHJ1ZSwgLy8gY29kZQogICAgICAgIHRhYmxlOiB0cnVlLCAvLyDooajmoLwKICAgICAgICBmdWxsc2NyZWVuOiB0cnVlLCAvLyDlhajlsY/nvJbovpEKICAgICAgICByZWFkbW9kZWw6IHRydWUsIC8vIOayiea1uOW8j+mYheivuwogICAgICAgIGh0bWxjb2RlOiB0cnVlLCAvLyDlsZXnpLpodG1s5rqQ56CBCiAgICAgICAgaGVscDogdHJ1ZSwgLy8g5biu5YqpCiAgICAgICAgLyogMS4zLjUgKi8KICAgICAgICB1bmRvOiB0cnVlLCAvLyDkuIrkuIDmraUKICAgICAgICByZWRvOiB0cnVlLCAvLyDkuIvkuIDmraUKICAgICAgICB0cmFzaDogdHJ1ZSwgLy8g5riF56m6CiAgICAgICAgc2F2ZTogZmFsc2UsIC8vIOS/neWtmO+8iOinpuWPkWV2ZW50c+S4reeahHNhdmXkuovku7bvvIkKICAgICAgICAvKiAxLjQuMiAqLwogICAgICAgIG5hdmlnYXRpb246IHRydWUsIC8vIOWvvOiIquebruW9lQogICAgICAgIC8qIDIuMS44ICovCiAgICAgICAgYWxpZ25sZWZ0OiB0cnVlLCAvLyDlt6blr7npvZAKICAgICAgICBhbGlnbmNlbnRlcjogdHJ1ZSwgLy8g5bGF5LitCiAgICAgICAgYWxpZ25yaWdodDogdHJ1ZSwgLy8g5Y+z5a+56b2QCiAgICAgICAgLyogMi4yLjEgKi8KICAgICAgICBzdWJmaWVsZDogdHJ1ZSwgLy8g5Y2V5Y+M5qCP5qih5byPCiAgICAgICAgcHJldmlldzogdHJ1ZSAvLyDpooTop4gKICAgICAgfQoJCX0KCX0sCgljcmVhdGVkKCl7CgkJdGhpcy5nZXRDYXRlTGlzdCgpCgkJdGhpcy5oZWFkZXJzID0ge0F1dGhvcml6YXRpb246YEJlYXJlciAke3dpbmRvdy5zZXNzaW9uU3RvcmFnZS5nZXRJdGVtKCd0b2tlbicpfWB9CgkJaWYodGhpcy5pZCl7CgkJCXRoaXMuZ2V0QXJ0SW5mbyh0aGlzLmlkKQoJCX0KCX0sCgltZXRob2RzOnsKCQkvLyDmn6Xor6Lmlofnq6Dkv6Hmga8KCQlhc3luYyBnZXRBcnRJbmZvKGlkKXsKCQkJY29uc3Qge2RhdGE6IHJlc30gPSBhd2FpdCB0aGlzLiRodHRwLmdldChgYXBpL3YxL2FydGljbGUvJHtpZH0vYCkKCQkJaWYocmVzLmNvZGUgIT0gMjAwKSByZXR1cm4gdGhpcy4kJG1lc3NhZ2UuZXJyb3IocmVzLm1zZykKCQkJdGhpcy5hcnRJbmZvID0gcmVzLmRhdGEKCQkJdGhpcy5hcnRJbmZvLmlkID0gcmVzLmRhdGEuSUQKCQkJdGhpcy5hcnRJbmZvLmltZyA9IHJlcy5kYXRhLmltZwoJCQkvLyDmnKzmnaXnlKjkuo7muLLmn5Plm77niYfliY3nvIDvvIzpgJrov4d2LWlm5Zu+54mH6Kej5Yaz5LqGCgkJCS8vIHRoaXMuYmFzZXVybCA9ICJodHRwOi8vbG9jYWxob3N0OjgwODEvIgoJCX0sCgkJLy8g6I635Y+W5YiG57G7CiAgICBhc3luYyBnZXRDYXRlTGlzdCgpIHsKICAgICAgY29uc3QgeyBkYXRhOiByZXMgfSA9IGF3YWl0IHRoaXMuJGh0dHAuZ2V0KCdhcGkvdjEvY2F0ZWdvcnkvJyx7cGFyYW1zOiB7CiAgICAgICAgICBzaXplOiAxMDAsCiAgICAgICAgICBwYWdlOiAxLAogICAgICAgIH0sfSkKICAgICAgaWYgKHJlcy5jb2RlICE9PSAyMDApIHJldHVybiB0aGlzLiRtZXNzYWdlLmVycm9yKHJlcy5tc2cpCiAgICAgIHRoaXMuQ2F0ZWxpc3QgPSByZXMuZGF0YQogICAgfSwKCQljYXRlQ2hhbmdlKHZhbCl7CgkJCXRoaXMuYXJ0SW5mby5jaWQgPSB2YWwKCQl9LAoJCXVwQ2hhbmdlKGluZm8pewoJCQlpZiAoaW5mby5maWxlLnN0YXR1cyAhPT0gJ3VwbG9hZGluZycpIHsKICAgICAgICAKICAgICAgfQogICAgICBpZiAoaW5mby5maWxlLnN0YXR1cyA9PT0gJ2RvbmUnKSB7CiAgICAgICAgdGhpcy4kbWVzc2FnZS5zdWNjZXNzKCfkuIrkvKDmiJDlip8nKTsKCQkJCWNvbnN0IGltZ1VybCA9IGluZm8uZmlsZS5yZXNwb25zZS5kYXRhCgkJCQl0aGlzLmFydEluZm8uaW1nID0gaW1nVXJsCiAgICAgIH0gZWxzZSBpZiAoaW5mby5maWxlLnN0YXR1cyA9PT0gJ2Vycm9yJykgewogICAgICAgIHRoaXMuJG1lc3NhZ2UuZXJyb3IoYOS4iuS8oOWksei0pWApOwogICAgICB9CgkJfSwKCQkvLyDmj5DkuqQKCQlhcnRPayhpZCl7CgkJCQoJCQl0aGlzLiRyZWZzLmFydEluZm9SZWYudmFsaWRhdGUoYXN5bmMgKHZhbGlkKSA9PiB7CgkJCQlpZiAoIXZhbGlkKSByZXR1cm4gdGhpcy4kbWVzc2FnZS5lcnJvcign5Y+C5pWw6aqM6K+B5pyq6YCa6L+H77yM6K+35oyJ6KaB5rGC5b2V5YWl5paH56ug5YaF5a65JykKCQkJCWlmIChpZCA9PT0gMCkgewogICAgICAgICAgY29uc3QgeyBkYXRhOiByZXMgfSA9IGF3YWl0IHRoaXMuJGh0dHAucG9zdCgnL2FwaS9hZG1pbi9hcnRpY2xlLycsIHRoaXMuYXJ0SW5mbykKICAgICAgICAgIGlmIChyZXMuY29kZSAhPT0gMjAwKSByZXR1cm4gdGhpcy4kbWVzc2FnZS5lcnJvcihyZXMubXNnKQogICAgICAgICAgdGhpcy4kcm91dGVyLnB1c2goJy9hZG1pbi9hcnRsaXN0JykKICAgICAgICAgIHRoaXMuJG1lc3NhZ2Uuc3VjY2Vzcygn5re75Yqg5paH56ug5oiQ5YqfJykKICAgICAgICB9IGVsc2UgewogICAgICAgICAgY29uc3QgeyBkYXRhOiByZXMgfSA9IGF3YWl0IHRoaXMuJGh0dHAucHV0KGAvYXBpL2FkbWluL2FydGljbGUvJHtpZH0vYCwgdGhpcy5hcnRJbmZvKQogICAgICAgICAgaWYgKHJlcy5jb2RlICE9PSAyMDApIHJldHVybiB0aGlzLiRtZXNzYWdlLmVycm9yKHJlcy5tc2cpCiAgICAgICAgICB0aGlzLiRyb3V0ZXIucHVzaCgnL2FkbWluL2FydGxpc3QnKQogICAgICAgICAgdGhpcy4kbWVzc2FnZS5zdWNjZXNzKCfmm7TmlrDmlofnq6DmiJDlip8nKQogICAgICAgIH0KCQkJfSkKCQl9LAoJCS8vIOWPlua2iAoJCWFkZENhbmNlbCgpewoJCQl0aGlzLiRyZWZzLmFydEluZm9SZWYucmVzZXRGaWVsZHMoKQoJCX0sCgkJLy8g5LiK5Lyg5Zu+54mH5pa55rOVCiAgICBhc3luYyAkaW1nQWRkKHBvcywgJGZpbGUpIHsKCQkJdmFyIGZvcm1kYXRhID0gbmV3IEZvcm1EYXRhKCk7CgkJCWZvcm1kYXRhLmFwcGVuZCgnZmlsZScsICRmaWxlKTsKCQkJY29uc3Qge2RhdGE6IHJlc30gPSBhd2FpdCB0aGlzLiRodHRwLnBvc3QoIi9hcGkvYWRtaW4vZmlsZS8iLGZvcm1kYXRhLHsgJ0NvbnRlbnQtVHlwZSc6ICdtdWx0aXBhcnQvZm9ybS1kYXRhJyB9KQoJCQl0aGlzLiRyZWZzLm1kLiRpbWdsc3QyVXJsKFtbcG9zLCAiaHR0cDovL2xvY2FsaG9zdDo4MDgxLyIrcmVzLmRhdGFdXSkKICAgIH0sCgkJYXN5bmMgJGltZ0RlbChwb3MpewoJCQl2YXIgZmlkID0gcG9zWzBdLnNwbGl0KCIvIikKCQkJY29uc3Qge2RhdGE6IHJlc30gPSBhd2FpdCB0aGlzLiRodHRwLmRlbGV0ZSgiL2FwaS9hZG1pbi9maWxlLyIse3BhcmFtczp7ImZpZCI6ZmlkW2ZpZC5sZW5ndGgtMV19fSkKCQkJaWYgKHJlcy5jb2RlICE9PSAyMDApIHJldHVybiB0aGlzLiRtZXNzYWdlLmVycm9yKHJlcy5tc2cpCgkJCXJldHVybiB0aGlzLiRtZXNzYWdlLnN1Y2Nlc3MoIuWIoOmZpOaIkOWKnyIpCgkJfQoJfQoKfQo="},{"version":3,"sources":["Addart.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA+DA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA","file":"Addart.vue","sourceRoot":"src/components/article","sourcesContent":["<template>\n\t<div>\n\t\t<a-card>\n\t\t\t<h3>{{id?'编辑文章':'新增文章'}}</h3>\n\t\t<a-form-model :model=\"artInfo\" ref=\"artInfoRef\" :rules=\"artInfoRules\" :hideRequiredMark=\"true\">\n\t\t\t<a-form-model-item label=\"文章标题\" prop=\"title\">\n\t\t\t\t<a-input style=\"width:300px\" v-model=\"artInfo.title\"></a-input>\n\t\t\t</a-form-model-item>\n\t\t\t<a-form-model-item \n\t\t\tstyle=\"width:200px\"\n\t\t\tprop=\"cid\"\n\t\t\tlabel=\"文章分类\">\n\t\t\t\t<a-select v-model=\"artInfo.cid\" placeholder=\"请选择分类\" @change=\"cateChange\">\n\t\t\t\t\t<a-select-option v-for=\"item in Catelist\" :key=\"item.id\" :value=\"item.id\">{{item.name}}</a-select-option>\n\t\t\t\t</a-select>\n\t\t\t</a-form-model-item>\n\t\t\t<a-form-model-item label=\"文章描述\" prop=\"desc\">\n\t\t\t\t<a-input type=\"textarea\" v-model=\"artInfo.desc\"></a-input>\n\t\t\t</a-form-model-item>\n\t\t\t<a-form-model-item label=\"缩略图\" prop=\"img\"> \n\t\t\t\t<a-upload\n\t\t\t\t\tname=\"file\"\n\t\t\t\t\t:multiple=\"false\"\n\t\t\t\t\t:action=\"uploadUrl\"\n\t\t\t\t\t:headers=\"headers\"\n\t\t\t\t\t@change=\"upChange\"\n\t\t\t\t\tlistType=\"picture\"\n\t\t\t\t>\n\t\t\t\t\t<a-button> <a-icon type=\"upload\" /> 上传图片 </a-button>\n\t\t\t\t\t<br/>\n\t\t\t\t\t<template v-if=\"id\">\n\t\t\t\t\t\t<!-- <img v-if=\"artInfo.img\" :src=\"baseurl+artInfo.img\" style=\"width:120px;height:100px\"> -->\n\t\t\t\t\t\t<img v-if=\"artInfo.img\" :src=\"'http://localhost:8081/'+artInfo.img\" style=\"width:120px;height:100px\">\n\t\t\t\t\t</template>\n\t\t\t\t</a-upload>\n\t\t\t</a-form-model-item>\n\t\t\t<a-form-model-item label=\"内容\" prop=\"content\">\n\t\t\t\t<mavon-editor\n            ref=\"md\"\n            placeholder=\"请输入文档内容...\"\n            :boxShadow=\"false\"\n            style=\"z-index:1;border: 1px solid #d9d9d9;height:50vh\"\n            v-model=\"artInfo.content\"\n            :toolbars=\"toolbars\"\n\t\t\t\t\t\t@imgAdd=\"$imgAdd\"\n\t\t\t\t\t\t@imgDel=\"$imgDel\"\n          />\n\t\t\t</a-form-model-item>\n\t\t\t<a-form-model-item>\n\t\t\t\t<a-button type=\"primary\" \n\t\t\t\tstyle=\"margin-right:15px\" \n\t\t\t\t@click=\"artOk(artInfo.id)\"\n\t\t\t\t>\n\t\t\t\t{{artInfo.id?\"更新\":'提交'}}\n\t\t\t\t</a-button>\n\t\t\t\t<a-button type=\"danger\" @click=\"addCancel\">取消</a-button>\n\t\t\t</a-form-model-item>\n\t\t</a-form-model>\n\t\t</a-card>\n\t</div>\n</template>\n\n<script>\nimport {Url} from \"../../plugins/http\"\nexport default {\n\tprops:['id'],\n\tdata(){\n\t\treturn{\n\t\t\t// baseurl:'',\n\t\t\tartInfo:{\n\t\t\t\tid:0,\n\t\t\t\ttitle:'',\n\t\t\t\tcid:undefined,\n\t\t\t\tdesc:'',\n\t\t\t\tcontent:'',\n\t\t\t\timg:''\n\t\t\t},\n\t\t\tCatelist:[],\n\t\t\tuploadUrl:Url+'/api/admin/file/',\n\t\t\theaders:{},\n\t\t\tartInfoRules: {\n        title: [{ required: true, message: '请输入文章标题', trigger: 'change' }],\n        cid: [{ required: true, message: '请选择文章分类', trigger: 'change' }],\n        desc: [\n          { required: true, message: '请输入文章描述', trigger: 'change' },\n          { max: 120, message: '描述最多可写120个字符', trigger: 'change' },\n        ],\n        content: [{ required: true, message: '请输入文章内容', trigger: 'change' }],\n      },\n\t\t\t// markdown对象\n\t\t\ttoolbars: {\n        bold: true, // 粗体\n        italic: true, // 斜体\n        header: true, // 标题\n        underline: true, // 下划线\n        strikethrough: true, // 中划线\n        mark: true, // 标记\n        superscript: true, // 上角标\n        subscript: true, // 下角标\n        quote: true, // 引用\n        ol: true, // 有序列表\n        ul: true, // 无序列表\n        link: true, // 链接\n        imagelink: true, // 图片链接\n        code: true, // code\n        table: true, // 表格\n        fullscreen: true, // 全屏编辑\n        readmodel: true, // 沉浸式阅读\n        htmlcode: true, // 展示html源码\n        help: true, // 帮助\n        /* 1.3.5 */\n        undo: true, // 上一步\n        redo: true, // 下一步\n        trash: true, // 清空\n        save: false, // 保存（触发events中的save事件）\n        /* 1.4.2 */\n        navigation: true, // 导航目录\n        /* 2.1.8 */\n        alignleft: true, // 左对齐\n        aligncenter: true, // 居中\n        alignright: true, // 右对齐\n        /* 2.2.1 */\n        subfield: true, // 单双栏模式\n        preview: true // 预览\n      }\n\t\t}\n\t},\n\tcreated(){\n\t\tthis.getCateList()\n\t\tthis.headers = {Authorization:`Bearer ${window.sessionStorage.getItem('token')}`}\n\t\tif(this.id){\n\t\t\tthis.getArtInfo(this.id)\n\t\t}\n\t},\n\tmethods:{\n\t\t// 查询文章信息\n\t\tasync getArtInfo(id){\n\t\t\tconst {data: res} = await this.$http.get(`api/v1/article/${id}/`)\n\t\t\tif(res.code != 200) return this.$$message.error(res.msg)\n\t\t\tthis.artInfo = res.data\n\t\t\tthis.artInfo.id = res.data.ID\n\t\t\tthis.artInfo.img = res.data.img\n\t\t\t// 本来用于渲染图片前缀，通过v-if图片解决了\n\t\t\t// this.baseurl = \"http://localhost:8081/\"\n\t\t},\n\t\t// 获取分类\n    async getCateList() {\n      const { data: res } = await this.$http.get('api/v1/category/',{params: {\n          size: 100,\n          page: 1,\n        },})\n      if (res.code !== 200) return this.$message.error(res.msg)\n      this.Catelist = res.data\n    },\n\t\tcateChange(val){\n\t\t\tthis.artInfo.cid = val\n\t\t},\n\t\tupChange(info){\n\t\t\tif (info.file.status !== 'uploading') {\n        \n      }\n      if (info.file.status === 'done') {\n        this.$message.success('上传成功');\n\t\t\t\tconst imgUrl = info.file.response.data\n\t\t\t\tthis.artInfo.img = imgUrl\n      } else if (info.file.status === 'error') {\n        this.$message.error(`上传失败`);\n      }\n\t\t},\n\t\t// 提交\n\t\tartOk(id){\n\t\t\t\n\t\t\tthis.$refs.artInfoRef.validate(async (valid) => {\n\t\t\t\tif (!valid) return this.$message.error('参数验证未通过，请按要求录入文章内容')\n\t\t\t\tif (id === 0) {\n          const { data: res } = await this.$http.post('/api/admin/article/', this.artInfo)\n          if (res.code !== 200) return this.$message.error(res.msg)\n          this.$router.push('/admin/artlist')\n          this.$message.success('添加文章成功')\n        } else {\n          const { data: res } = await this.$http.put(`/api/admin/article/${id}/`, this.artInfo)\n          if (res.code !== 200) return this.$message.error(res.msg)\n          this.$router.push('/admin/artlist')\n          this.$message.success('更新文章成功')\n        }\n\t\t\t})\n\t\t},\n\t\t// 取消\n\t\taddCancel(){\n\t\t\tthis.$refs.artInfoRef.resetFields()\n\t\t},\n\t\t// 上传图片方法\n    async $imgAdd(pos, $file) {\n\t\t\tvar formdata = new FormData();\n\t\t\tformdata.append('file', $file);\n\t\t\tconst {data: res} = await this.$http.post(\"/api/admin/file/\",formdata,{ 'Content-Type': 'multipart/form-data' })\n\t\t\tthis.$refs.md.$imglst2Url([[pos, \"http://localhost:8081/\"+res.data]])\n    },\n\t\tasync $imgDel(pos){\n\t\t\tvar fid = pos[0].split(\"/\")\n\t\t\tconst {data: res} = await this.$http.delete(\"/api/admin/file/\",{params:{\"fid\":fid[fid.length-1]}})\n\t\t\tif (res.code !== 200) return this.$message.error(res.msg)\n\t\t\treturn this.$message.success(\"删除成功\")\n\t\t}\n\t}\n\n}\n</script>\n\n<style>\n\n</style>"]}]}