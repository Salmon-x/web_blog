{"remainingRequest":"/Users/salmon/go/src/我的博客/blog/web/admin/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/salmon/go/src/我的博客/blog/web/admin/src/components/user/UserList.vue?vue&type=style&index=0&lang=css&","dependencies":[{"path":"/Users/salmon/go/src/我的博客/blog/web/admin/src/components/user/UserList.vue","mtime":1626256284629},{"path":"/Users/salmon/go/src/我的博客/blog/web/admin/node_modules/css-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/salmon/go/src/我的博客/blog/web/admin/node_modules/vue-loader/lib/loaders/stylePostLoader.js","mtime":499162500000},{"path":"/Users/salmon/go/src/我的博客/blog/web/admin/node_modules/postcss-loader/src/index.js","mtime":499162500000},{"path":"/Users/salmon/go/src/我的博客/blog/web/admin/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/salmon/go/src/我的博客/blog/web/admin/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgouYWN0aW9uU2xvdHsKCWRpc3BsYXk6IGZsZXg7CglqdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlcjsKfQoK"},{"version":3,"sources":["UserList.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAmIA;AACA;AACA;AACA","file":"UserList.vue","sourceRoot":"src/components/user","sourcesContent":["<template>\n\t<div>\n\t\t<a-card>\n\t\t\t<a-row :gutter=\"20\">\n\t\t\t\t<a-col :span=\"6\">\n\t\t\t\t\t<a-input-search \n\t\t\t\t\tv-model=\"queryParam.username\"\n\t\t\t\t\tallowClear placeholder=\"请输入用户名\" \n\t\t\t\t\tenter-button \n\t\t\t\t\t@search=\"getUserList\" />\n\t\t\t\t</a-col>\n\t\t\t\t<a-col :span=\"4\">\n\t\t\t\t\t<a-button type=\"primary\">新增</a-button>\n\t\t\t\t</a-col>\n\t\t\t</a-row>\n\t\t\t<a-table \n\t\t\t\t:columns='columns' \n\t\t\t\trowKey='ID'\n\t\t\t\t:pagination=\"pagination\"\n\t\t\t\t:dataSource=\"userlist\"\n\t\t\t\tbordered\n\t\t\t\t@change=\"handleTableChange\"\n\t\t\t>\n\t\t\t<span slot=\"role\" slot-scope=\"role\">{{role == 1 ? \"管理员\":\"订阅者\"}}</span>\n\t\t\t<template slot=\"action\" slot-scope=\"data\">\n\t\t\t\t<div class=\"actionSlot\">\n\t\t\t\t<a-button type=\"primary\" style=\"margin-right:15px\">编辑</a-button>\n\t\t\t\t<a-popconfirm title=\"确认删除？删除后无法恢复\" ok-text=\"确认\" cancel-text=\"取消\" @confirm=\"delUser(data.ID)\">\n\t\t\t\t  <a-button type=\"danger\">删除</a-button>\n\t\t\t\t</a-popconfirm>\n\t\t\t</div>\n\t\t\t</template>\n\t\t\t</a-table>\n\t\t</a-card>\n\t</div>\n</template>\n\n<script>\nconst columns = [\n\t{\n    title: 'ID',\n    dataIndex: 'ID',\n    key: 'id',\n    width: '10%',\n\t\talign:'center'\n  },\n\t{\n    title: '用户名',\n    dataIndex: 'username',\n    key: 'username',\n    width: '20%',\n\t\talign:'center'\n  },\n\t{\n    title: '角色',\n    dataIndex: 'role',\n    key: 'role',\n    width: '20%',\n\t\tscopedSlots:{customRender:'role'},\n\t\talign:'center'\n  },\n\t{\n    title: '操作',\n    key: 'action',\n    width: '30%',\n\t\tscopedSlots:{customRender:'action'},\n\t\talign:'center'\n  },\n]\nexport default {\n\tdata(){\n\t\treturn{\n\t\t\tcolumns,\n\t\t\tpagination: {\n        pageSizeOptions: ['5', '10', '20'],\n        pageSize: 5,\n        total: 0,\n        showSizeChanger: true,\n        showTotal: (total) => `共${total}条`,\n      },\n\t\t\tqueryParam: {\n\t\t\t\tusername:'',\n        pagesize: 5,\n        pagenum: 1,\n      },\n\t\t\tuserlist:[],\n\t\t}\n\t},\n\tcreated(){\n\t\tthis.getUserList()\n\n\t},\n\tmethods:{\n\t\tasync getUserList(){\n\t\t\tconst { data:res } = await this.$http.get('api/v1/user/', {\n\t\t\t\tparams:{\n\t\t\t\t\tusername: this.queryParam.username,\n\t\t\t\t\tsize: this.queryParam.pagesize,\n\t\t\t\t\tpage: this.queryParam.pagenum,\n\t\t\t\t\t},\n\t\t\t\t})\n\t\t\tif(res.code != 200)return this.$message.error(res.msg)\n\t\t\tthis.userlist = res.data\n\t\t\tthis.pagination.total = res.total\n\t\t},\n\t\thandleTableChange(pagination, filters, sorter) {\n      var pager = { ...this.pagination }\n      pager.current = pagination.current\n      pager.pageSize = pagination.pageSize\n      this.queryParam.pagesize = pagination.pageSize\n      this.queryParam.pagenum = pagination.current\n\n      if (pagination.pageSize !== this.pagination.pageSize) {\n        this.queryParam.pagenum = 1\n        pager.current = 1\n      }\n      this.pagination = pager\n      this.getUserList()\n    },\n\t\tasync delUser(id){\n\t\t  const { data: res } = await this.$http.delete(`api/admin/user/${id}/`)\n\t\t\tif(res.code != 200)return this.$message.error(res.msg)\n\t\t\tthis.queryParam.pagenum = 1\n\t\t\tthis.getUserList()\n\t\t}\n\t}\n\n}\n</script>\n\n<style>\n.actionSlot{\n\tdisplay: flex;\n\tjustify-content: center;\n}\n\n</style>"]}]}